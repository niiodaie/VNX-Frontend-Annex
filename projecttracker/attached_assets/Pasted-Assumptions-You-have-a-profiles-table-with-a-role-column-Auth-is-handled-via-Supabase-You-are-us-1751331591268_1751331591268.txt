Assumptions
You have a profiles table with a role column.

Auth is handled via Supabase.

You are using a framework like Next.js or React with @supabase/supabase-js.

2. Update Your Login Logic
Inside your login or onAuthStateChange handler (likely in client/src/pages/Login.tsx or your global auth.ts), add:

ts
Copy
Edit
import { supabase } from '@/lib/supabase'
import { useRouter } from 'next/router' // or 'react-router-dom'

const router = useRouter();

const handleLogin = async (email: string, password: string) => {
  const { data, error } = await supabase.auth.signInWithPassword({ email, password });

  if (error) {
    console.error('Login failed:', error.message);
    return;
  }

  // Fetch the user's profile to determine role
  const {
    data: profile,
    error: profileError,
  } = await supabase
    .from('profiles')
    .select('role')
    .eq('id', data.user.id)
    .single();

  if (profileError) {
    console.error('Error fetching profile:', profileError.message);
    return;
  }

  // Redirect based on role
  switch (profile.role) {
    case 'super_admin':
      router.push('/dashboard/super-admin');
      break;
    case 'admin':
      router.push('/dashboard/admin');
      break;
    default:
      router.push('/dashboard');
  }
};
3. Optional: Auto Redirect on Session Change
If you're using an auth listener, add this to your global layout or app initializer:

ts
Copy
Edit
supabase.auth.onAuthStateChange(async (event, session) => {
  if (event === 'SIGNED_IN') {
    const { data: profile } = await supabase
      .from('profiles')
      .select('role')
      .eq('id', session.user.id)
      .single();

    switch (profile.role) {
      case 'super_admin':
        router.push('/dashboard/super-admin');
        break;
      case 'admin':
        router.push('/dashboard/admin');
        break;
      default:
        router.push('/dashboard');
    }
  }
});
4. Pages Setup
Ensure you have routes/pages like:

/dashboard

/dashboard/admin

/dashboard/super-admin

And optionally include guards or layout restrictions for each.

